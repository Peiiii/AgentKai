                              ┌───────────────────────────────────────┐
                              │             AISystem                   │
                              └───────────────┬───────────────────────┘
                                              │
                                              │ 使用
                                              ▼
┌──────────────────────────────────────────────────────────────────────────────┐
│                                   MemorySystem                                │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐  │
│  │                             核心功能                                    │  │
│  │  ┌──────────────┐  ┌───────────────┐  ┌───────────────┐  ┌──────────┐  │  │
│  │  │ 创建记忆     │  │ 存储和检索    │  │ 记忆管理      │  │ 更新删除 │  │  │
│  │  └──────────────┘  └───────────────┘  └───────────────┘  └──────────┘  │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
│                │                │                                            │
└────────────────┼────────────────┼────────────────────────────────────────────┘
                 │                │
                 │ 调用           │ 调用
                 ▼                ▼
┌──────────────────────────┐    ┌──────────────────────────────────────────────┐
│    StorageProvider       │    │               EmbeddingProvider              │
│ (存储记忆的接口抽象)     │    │            (生成文本的向量表示)              │
└──────────┬───────────────┘    └───────────────────┬──────────────────────────┘
           │                                        │
           │                                        │
           │                                        │
           │                                        │
           │                                        │
           ▼                                        ▼
┌──────────────────────────────────────────────────────────────────────────────┐
│                            HnswSearchProvider                                 │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐  │
│  │                             搜索功能                                    │  │
│  │  ┌──────────────┐  ┌───────────────┐  ┌───────────────┐  ┌──────────┐  │  │
│  │  │ 内容搜索     │  │ 向量搜索      │  │ 索引管理      │  │ 持久化   │  │  │
│  │  └──────────────┘  └───────────────┘  └───────────────┘  └──────────┘  │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
│                                    │                                         │
└────────────────────────────────────┼─────────────────────────────────────────┘
                                     │
                                     │ 使用
                                     ▼
┌──────────────────────────────────────────────────────────────────────────────┐
│                              HnswVectorIndex                                  │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐  │
│  │                             底层操作                                    │  │
│  │  ┌──────────────┐  ┌───────────────┐  ┌───────────────┐  ┌──────────┐  │  │
│  │  │ 创建/加载索引│  │ 添加/删除记忆 │  │ 相似度搜索    │  │ 保存索引 │  │  │
│  │  └──────────────┘  └───────────────┘  └───────────────┘  └──────────┘  │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
``` 